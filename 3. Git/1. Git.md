# Git

- [Git](#git)
  - [Version Control](#version-control)
  - [Git helps us](#git-helps-us)
  - [Git History](#git-history)
- [Basics of Git](#basics-of-git--adding-and-commiting)
  - [Repository](#repository)
  - [Commiting](#commiting)
  - [Three Stage Architecture](#three-stage-architecture)
  - [Git Init](#git-init)
  - [Git Add](#git-add)
  - [Git Status](#git-status)
  - [Git Commit](#git-commit)
- [Commits in Details](#commits-in-details)
  - [Ammending Commits](#amending-commits)
  - [Atomic Commits](#atomic-commits)
  - [Ignoring Files](#ignoring-files)
- [Git Branches](#git-branch)
  - [Master Branch](#master-branch)
  - [Viewing Branches](#viewing-branches)
  - [Creating Branches](#creating-branches)
  - [Switching Branches](#switching-branches)
  - [Git Checkout](#git-checkout)
- [Git Stash](#git-stash)

- [Undoing Changes & Time Travelling](#undoing-changes--time-travellingcheckout--restore--reset)
  - [Checkout](#checkout)
    - [More About Checkout](#more-about-git-checkout)
    - [Discarding Changes](#discarding-changes-with-git-checkout)
  - [Restore](#restore)
    - [Unmodifying files with Restore](#unmodifying-files-with-restore)

---

## Git

Git is a distributed **`version control`** system.

#### Version Control

- Version Control is software that **`tracks and manages changes`** to file over time.
- Version Control system generally allow users to revisit earlier version of the files,compare changes between versions and undo changes and lot more...

#### Git helps us ...

- Track Changes accross multiple files
- Compare versions of a project
- "Time travel" back to old versions
- Revert to a previous version
- Collabrate and share Changes
- Combine Changes

### Git History

**Linus Torvalds** is a legendary software engineer. He is the creator and main developer behind Linux and Git.

- In 2005 while working on Linux, he become frustrated with the available version control systems.The existing tools were slow, closed-source, and usually paid.
- Torvalds wanted a version control system that was super fast and free, unlike the existing tools.
- On April 3rd 2005 he got to work on his own VCS. which would become Git. In a matter of days he had most basuc functionality done.
- The first official Git release came a couple months later.15 years later in 2020, over 90% of developers worldwide use git on daily basis.

### Git & Github

- Git is the version control software that runs locally on your machine. You don't need to register for an account. You don't need the internet to use it. You can use Git without ever touching Github.
- Github is a service that hosts Git repositories in the cloud and makes it easier to collaborate with other people. You do need to sign up for an account to use Github. It's an online place to share work that is done using Git.

---

## Basics of Git : Adding and Commiting

### Repository

A Git "Repo" is a workspace which tracks and manages files within a folder.

Anytime we want to use Git with a app, we need to create a new git repository.

### Commiting

Making a commit is similar to making a save in a video game. We're taking a snapshot of a git repository in time.

When saving a file, we are saving the state of a single file. With Git, we can save the state of multiple files and folders together.

#### Basic Workflow

Work on Stuff(code) => Add Changes => Commit

#### Three Stage Architecture

<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSilqWijozuFn2_e8wMH3OiJ-9qMAgXqioluw&usqp=CAU" alt="Search for Git three Stage Architecture">

#### Git Init

Use **`git init`** to create a new git repository. Before we can do anything git-related, we must initialize a repo first!

#### Git Add

Use **`git add`** to add specific files to the staging area. Separate files with spaces to add multiple at once.

```
git add index.html style.css script.js
```

Use `git add .` to stage all changes at once.

#### Git Status

**`git status`** gives information on the current status of a git repository and its contents.

#### Git Commit

We use the `git commit` command to actually commit changes from the staging area.

When making a commit, we need to provide a commit message that summarizes the changes and work snapshotted in the commit.

```
git commit -m "first commit"
```

#### Git Logs

Shows the commit logs.

```
git logs
```

---

## Commits in Details

### Amending Commits

Suppose you just made a commit and then realized you forgot to include a file! Or maybe you made a typo in the commit message that you want to correct.

Rather than making a brand new seperate commit you can "redo" the previous commit using the `--amend` option

```bash
git commit -m "some commit"
git add forgotten_file
git commit --amend
```

### Atomic Commits

When possible, a commit should encompass a single feature,change or fix.In other words try to keep each commit focused on single thing.

This makes it much easier to undo or rollback changes later on.It also makes your code or project easier to review.

### Ignoring Files

We can tell Git which files and directories to ignore in a given repository, using a `.gitignore` file.

This is useful when you know you never want to commit, including

- Secrets, API Keys, credentials, etc...
- Operating System files (.DS_store on Mac)
- Log files
- Dependencies and packages

Create a file called .gitignore in the root of a repository. Inside the file we can write patterns to tell Git which includes files and folders to ignore

- `.DS_Store` will ignore files named .DS_Store
- `folderName/` will ignore an entire directory
- `*.log` will ignore any files with the .log extension

---

## Git Branch

Branch are an essential part of Git

Think of branches as alternative timelines for a project.

They enable us to create seperate contexts where we can try new things, or even work on multiple ideas in parallel.

#### Contexts to Understand Git branch Scenario

On large Projects, we often work in multiple contexts

1. You are working on 2 different color scheme varaitions for your website at the same time, unsure of which you like best.
2. You're also trying to fix a horrible bug, but it's proving tough to solve. You need to really hunt around and toggle some code on and off to figure it out.
3. A teammate is also working on adding a new chat widget to present at the next meeting. It's unclear if your company will end up using it.
4. Another coworker is updating the search bar autocomplete.
5. Another developer is doing an experimental radical design overhaul of the entire layout to present next month.

### Master Branch

In git, we are always working on a branch, The default branch name is **master**.

It doesn't do anything special or have fancy powers. Its just like any other branch.

#### Master

Many people designate the master branch as their "source of truth" or the "official branch" for their codebase, but that is left to you to decide.

From Git's perspective, the master branch is just like any other branch. It does not have to hold the "master copy" of your project.

#### Master? or Main?

In 2020, Github renamed the default branch from **master** to **main**.The default Git branch name is still **master**, through the Git team is exploring a potential change.

#### Head

HEAD is simply a pointer that refers to the current "location". In your repository. It points to a particular branch refernce.

So far, HEAD always point to the latest commit you made on the master branch.

### Viewing Branches

Use **`git branch`** to view your existing branches.

Look for the \* which indicates the branch you are currently on.

### Creating Branches

Use **`git branch <branch-name>`** to make a new branch based upon the current HEAD

```bash
git branch oldies
```

This just create the branch.It does not switch you to that branch(the Head Stays the same)

### Switching Branches

Once you created the branch,
Use **`git switch <branch-name>`** to switch to it.

```bash
git switch oldies
```

HEAD will point to the oldies branch.

### Git Checkout

Historically, we used `git checkout <branch-name>` to switch branches.

The **checkout** command does a million additional things,so the decision was made to add a standalone switch command which is much simpler.

### Creating & Switching

use **`git switch `** with the `-c` flag to create a new branch AND switch it to all in one go.

Remember **-c** as short for "create"

```
git switch -c bugfix
```

### Deleting and Renaming Branches

To Delete the branch use `-d` flag or `--delete`

```
git branch -d junkies
```

Delete a branch, The branch must be fully merged in its upstream branch, or in `HEAD` if no upstream was set with `--track` or `--set-upstream-to`.

To move/rename the branch use `-m` flag or `--move` together with its config/reflog.

Use the `-v` flag with git branch to view more information about each branch.

Reference: <a href="https://www.canva.com/design/DAEPOwX2Zzs/90STrbMXNysYIkSsxUCu-g/view?utm_content=DAEPOwX2Zzs&utm_campaign=designshare&utm_medium=link&utm_source=sharebutton">Branching Slides for more info</a>

---

## Merging Branches

The merge command can sometimes confuse students early on. Remember these two merging concepts:

- We merge branches, not specific commits
- We always merge to the current HEAD branch

To merge, follow these basic steps

1. Switch to or checkout the branch you want to merge the changes into (the receiving branch)
2. Use the **git merge** command to merge changes from a specific branch into the current branch.

for eg: To merge the bugfix branch into master...

```
git switch master
git merge bugfix
```

### FAQ about Merging

- What if we add a commit on master before merging the branch?
- What happens when I try to merge ?

Refer <a href="https://www.canva.com/design/DAEUZEra8W0/b4I77uG1YJAu4q6UOTIG6Q/view?utm_content=DAEUZEra8W0&utm_campaign=designshare&utm_medium=link&utm_source=sharebutton#8">Visualizing Merging Branches Slidess</a>

### Merge Conflicts

Depending on the specific changes your are trying to merge, Git may not be able to automatically merge. This results in **merge conflicts**, which you need to manually resolve.

```
CONFLICT (content): Merge conflict in blah.txt

Automatic merge failed; fix conflicts and then commit the result.
```

When you encounter a merge conflict, Git warns you in the console that it could not automatically merge.

It also changes the contents of your files to indicate the conflicts that it wants you to resolve.

#### Content Markers

- The content from your current HEAD (the branch you are trying to merge content into) is displayed **between the <<<<<<< HEAD and =======**
- The content from the branch you are trying to merge from is displayed **between the ======= and >>>>>>> symbols**.

#### Resolving Confiicts

Whenever you encounter merge conflicts, follow these steps to resolve them:

1. Open up the file(s) with merge conflicts
2. Edit the file(s) to remove the conflicts.Decide which branch's content you want to keep in each conflict. Or keep the content from both.
3. Remove the conflict "markers" in the document
4. Add your changes and then make a commit!

---

## Git Diff

We can use **git diff** command to view changes between commits, branches, files, our working directory and more!

We often use git diff alongside commands like git status and git log, to get better picture of a repository and how it has changed over time.

Without additional options, git diff lists all the changes in our working directory that are not staged for next commit.

**`git diff HEAD`** list all the changes in the working tree since your last commit.

**git diff --staged** or **--cached** will list the changes between the staging area and our last commit.

```
git diff --staged

git diff --cached
```

### HEAD~I

`HEAD~I` is short synatx for "the parent commit of HEAD".

### Diff-ing Specific files

We can view the changes within a specific file by providing git diff with a filename.

```
git diff HEAD [filename]
```

### Comparing Branches

**`git diff branch1..branch2`** will list the changes between the tips of branch1 and branch2

```
git diff branch1..branch2
```

### Comparing Commits

To compare two commits, provide git diff with the commit hashes of the commits in question.

```
git diff commit1..commit2
```

---

## Git Stash

### Stashing

Git Provides an easy way of stashing these uncommited changes so that we can return to them later, without having to make unneccessary commits.

**`git stash`** is super useful command that helps you save changes that you are not yet ready to commit. You can stash changes and then comeback to them later

Running `git stash` will take all uncommited changes(staged or unstaged) and stash them, reverting the changes in your working copy.

Use **`git stash pop`** to remove the most recently stashed changes in your stash and re-apply to them to your working copy.

### Stash Apply

You can use `git stash apply` to apply whatever is stashed away, without removing it from the stash.This can be useful if you want to apply stashed changes to mulitiple branches.

```
git stash apply
```

**Note**: If you have untracked files (files that you have never checked in to Git), they will not be included in the stash.

Fortunately, you can use the `-u` option to tell git stash to include those untracked files.

```
git stash -u
```

### Stashing Multiple Times

You can add multiple stashes onto the stack of stashes. They will all be stashed in the order you added them.

### Viewing Stashes

run `git stash list` to view all stashes

```
git stash list

<!-- o/p -->
stash@{0}: WIP on master: 049d078 Create index file
stash@{1}: WIP on master: c264051 Revert "Add file_size"
stash@{2}: WIP on master: 21d80a5 Add number to log
```

### Applying Specific Stash

git assumes you want to apply the most recent stash when you run `git stash apply`, but you can also specify a particular stash like `git stash apply stash@{2}`

### Dropping Stashes

To delete a particular stash, you can use
`git stash drop <stash-id>`

```
git stash drop stash@{2}
```

### Clearing the Stash

To clear out all the stashes, run `git stash clear`

---

## Undoing Changes & Time Travelling(Checkout & Restore & Reset)

### Checkout

The **`git checkout`** command is like a Git Swiss Army Knife(multifunctional) .

Many developer thinks it is overloaded, which is what lead to the addition of the **git switch** and **git restore** commands.

We can use **checkout** command to create branches, switch to new branches, restore files and undo history!

We can use `git checkout commit<commit-hash>` to view a previous commit.

```
git checkout d8194d6
```

Remember, you can use the **git log** command to view commit hashes. We just need the first 7 digits of a commit hash.

#### Detached Head

Reference <a href="https://www.canva.com/design/DAEPZZHOafo/uagxrNdvbI_wDpjfNpK_4w/view?utm_content=DAEPZZHOafo&utm_campaign=designshare&utm_medium=link&utm_source=sharebutton#4">Detached Head in Detail Slides</a>

#### More About Git Checkout

**git checkout** supports a slightly odd syntax for referncing previous commits relative to a particular commit

- **HEAD~1** refers to the commit before HEAD(parent)
- **HEAD~2** refers to the 2 commit before HEAD(grandparent)

#### Discarding Changes with git Checkout

Suppose you've made a some changes to a file but don't want to keep them. To revert the file back to whatever it looked like when you last committed , you can use

`git checkout HEAD<filename>` to discard any changes in that file , reverting back to the HEAD.

##### Another Option

Rahter than typing HEAD, you can substitute -- followed by the file you want to restore.

```
git checkout -- <file>
```

### Restore

git restore is a brand new Git command that helps with undoing operations.

Because it is so new, most of the existing Git tutorials and books do not mention it, but it is worth knowing!

Recall that **git checkout** does a million different things, which many git users find very confusing. **git restore** was introduced alongside git switch as alternatives to some of the uses for checkout.

#### Unmodifying Files with Restore

Suppose you've made some changes to a file since your last commit. You've saved the file but then realize you definitely do NOT want those changes anymore!

To restore the file to the contents in the HEAD,

use `**git restore <file-name>**`

**NOTE**: The above command is not "undoable" ,If you have uncommited changes in the file, they will be lost!

`git restore <file-name>` restores using HEAD as the default source, but we can change that using the --source option.

For example, `git restore --source HEAD~1 home.html` will restore the contents of home.html to its state from the commit prior to HEAD. You can also use a particular commit hash as the source.

```
git restore --source HEAD~1 app.js
```

#### Unstaging Files with Restore

If you have accidentally added a file to your staging area with git add and you don't wish to include it in the next commit, you can use **git restore** to remove it from staging.

Use the **--staged** option like this:

```
git restore --staged app.js
```

### Reset
